MIDI to BASS TAB Sequencer - 使い方

この度は、MIDI to BASS TAB Sequencer をご利用いただきありがとうございます。
このファイルでは、本アプリケーションの基本的な使い方から高度な機能までを解説します。

---

### 1. 起動方法

このアプリケーションは、サーバーを必要としない単一のHTMLファイルとして動作します。
 `index.html` をブラウザで開いてください。

---

### 2. 基本的な使い方

#### 2.1. MIDIキーボードの接続

アプリケーションを開いた状態で、お使いのMIDIキーボードをPCに接続してください。
自動的に認識され、画面右下の「MIDIログ」にデバイス名が表示されます。

#### 2.2. ノートの入力

MIDIキーボードの鍵盤を弾くと、その音程が自動的に解析され、画面中央のTAB譜にノートが入力されます。
ノートは現在カーソルがある位置に追加され、入力後にカーソルは自動的に次に進みます。

#### 2.3. カーソルの移動

- **キーボードの矢印キー（← →）** を使うことで、TAB譜上のカーソルを左右に移動できます。

#### 2.4. ノートの削除

- **TAB譜上のノートをクリックする:** 削除したいノートの数字部分をクリックすると、そのノートが消えます。
- **Deleteキー:** カーソル位置の直前のノートを削除します。

---

### 3. 再生機能

画面中央上部にあるトランスポートバーで、作成したTAB譜を再生できます。

- **再生ボタン（▶）:** 曲の最初から再生を開始します。
- **ステップ再生ボタン（⏯）:** カーソル位置の音を一つずつ確認しながら再生します。
- **停止ボタン（■）:** 再生を停止します。
- **BPM:** 曲の再生速度（テンポ）を変更できます。
- **Output:** 音の出力先を選択します。「内蔵シンセサイザー」を選ぶと、PCから直接音が出ます。外部MIDI音源を接続している場合は、ここに表示されます。

---

### 4. 編集ツール

画面右側の「編集ツール」セクションで、譜面の構成を編集できます。

- **小節の追加:** 曲の末尾に新しい空の小節を追加します。
- **現在の小節を削除:** カーソルがある小節を丸ごと削除します。
- **全消去:** すべての小節を消去し、譜面をリセットします。
- **Undo / Redo:** 直前の操作を取り消したり、やり直したりできます。

---

### 5. 高度な奏法（スライド / ハンマリング / プリング）

このシーケンサーでは、スライド、ハンマリング・オン、プリング・オフの奏法を記録できます。

**入力手順:**

1.  TAB譜上で、奏法の**開始点**となるノートにカーソルを合わせます。（または、ノートを入力した直後でも構いません）
2.  奏法に応じたキーをキーボードで押します。
    -   `S`キー: **スライド**
    -   `H`キー: **ハンマリング・オン**
    -   `P`キー: **プリング・オフ**
3.  「〇〇入力」というダイアログが表示されたら、MIDIキーボードで奏法の**終了点**となるノートを演奏します。
4.  成功すると、`7s9` (スライド) や `5h7` (ハンマリング) のようにTAB譜に記録されます。

**注意:** 奏法は同じ弦の上でのみ成立します。別の弦の音を終了点として演奏した場合は、エラーとなります。

---

### 6. 設定

画面右側の「設定」セクションで、アプリケーションの動作をカスタマイズできます。

- **TAB変換モード:** MIDIノートをTAB譜に変換する際の優先ロジックを変更できます。
- **カスタムチューニング:** ベースの各弦の開放弦の音程をMIDIノート番号で設定できます。適用すると現在の譜面はリセットされます。

---

### 7. インポート / エクスポート

作成した譜面データを様々な形式で保存（エクスポート）したり、読み込んだり（インポート）できます。

- **Export Text:** 人間が読めるテキスト形式でTAB譜を出力します。
- **Export JSON:** アプリケーションで再編集可能なデータ形式（JSON）で譜面を出力します。後でこのファイルをインポートして作業を再開できます。
- **Export WAV:** 作成したTAB譜を音声ファイル（.wav形式）として書き出し、ダウンロードします。処理に少し時間がかかる場合があります。
- **Import from JSON File:** 「Export JSON」で保存したファイルを選択し、譜面を読み込みます。

---

### 8. その他の機能

- **テーマ切り替え:** 画面右上の太陽（☀）または月（🌙）のアイコンをクリックすると、ライトモードとダークモードを切り替えられます。
- **言語切り替え:** 「EN」「JA」のボタンで、いつでも表示言語を英語と日本語で切り替えられます。
- **データ保存:** 作成した譜面データは、ブラウザを閉じても消えないように自動的に保存されます。次回開いた際には、前回の状態から再開できます。

